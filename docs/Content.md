# Content

Post `content` can be a [Text](#text) or an array of ["Content blocks"](#content-block).

## Content block

A "Content block" can be a:

* ["Inline content"](#inline-content)
* ["Block" element](#block-elements)

## Inline content

"Inline content" can be a:

* [Text](#text)
* An array of [inline elements](#inline-elements)

## Inline elements

### Text

```js
"Test"
```

### Styled text

```js
{
	type: "text",
	style: "...",
	content: InlineContent
}
```

Styles:

* `"bold"`
* `"italic"`
* `"underlined"`
* `"strikethrough"`
* `"subscript"`
* `"superscript"`

### New line

```js
"\n"
```

### Emoji

```js
{
	type: "emoji",
	name: "...",
	url: "..."
}
```

### Quote (inline)

```js
{
	type: "quote",
	kind: string?,
	block: boolean?,
	content: InlineContent
}
```

* `kind` is for "imageboards" which have regular quotes (`> Text`) and "inverse" quotes (`< Text`).
* `block` — `true` means "emulate block quote appearance while staying inline".

### Inline spoiler

```js
{
	type: "spoiler",
	censored: boolean?,
	content: InlineContent
}
```

* `censored` is for cases when the app autogenerates an inline spoiler to hide ignored words (like "swear" words).

### Post link

```js
{
	type: "post-link",
	url: "...",
	content: InlineContent
}
```

On "imageboards", the way to quote a post is by writing `>>PostId`. Such quoted post ids can be parsed by the app into `post-link` elements.

Message text example:

```
>>12345
> as said in the document
what document?
```

Parsed content:

```js
[
	{
		type: 'post-link',
		url: '/b/123#12345',
		boardId: 'b',
		threadId: 123,
		postId: 12345,
		content: [{
			type: 'quote',
			content: 'as said in the document'
		}]
	},
	'what document?'
]
```

If a `post-link`'s `content` is an array and its first element is a `quote` then such `post-link`'s `content` can only have `quote`s separated by `"\n"`s.

If a `post-link` quote hasn't been specified by the user when composing a message then such `post-link` quote is usually autogenerated, in which case each `quote` will have `generated: true` flag.

```js
{
	type: "post-link",
	url: "...",
	content: [{
		type: "quote",
		generated: true,
		content: "..."
	}]
}
```

If the first `quote` of a `post-link` has `generated: true` flag then it means that all `quote`s of such `post-link` are autogenerated.

### Link

```js
{
	type: "link",
	url: "...",
	service: String?,
	attachment: Attachment?,
	content: InlineContent,
	contentGenerated: boolean?
}
```

* `service` can only be present for links created by manually calling `createLink(url, content)` exported function: such `url`s will be parsed to see if a `service` can be detected. For example, a YouTube video URL will be parsed and the resulting `link` will have `service` set to `"youtube"` and `content` set to the video ID, and a YouTube icon could then be shown before the link's `content` when the link is rendered (or, if there's no icon for a `service`, a simple `${service}:` prefix could be prepended to it).
* `attachment` is for cases when parsing links. For example, a YouTube video link may have both `content` with the title of the video and `attachment` being a [`Video`](#video).
* Sometimes a link is parsed from a URL an in such cases `content` is autogenerated from the URL and `contentGenerated: true` flag is set.

### Code (inline)

```js
{
	type: "code",
	language: String?,
	content: InlineContent
}
```

* `language` can be specified for syntax highlighting.

### Read more (inline)

A "Read more" button that is placed in the same paragraph as the trimmed text. Is autogenerated when generating post previews for long posts.

```js
{
	type: "read-more"
}
```

## Block elements

### Subheading

```js
{
	type: "heading",
	content: InlineContent
}
```

### List

```js
{
	type: "list",
	items: InlineContent[]
}
```

### Code (block)

```js
{
	type: "code",
	language: String?,
	content: InlineContent
}
```

* `language` can be specified for syntax highlighting.

### Quote (block)

```js
{
	type: "quote",
	url: string?,
	source: string?,
	content: InlineContent
}
```

* `source` can be a website name or an author's name.

### Attachment

[Attachments](https://gitlab.com/catamphetamine/social-components/tree/master/docs/Attachments.md) can be embedded in a post.

An attachment can be embedded either by its `id` or directly:

```js
{
	type: "attachment",
	// `attachmentId` is the `id` of the attachment in `post.attachments`.
	attachmentId: number
}
```

```js
{
	type: "attachment",
	// An attachment that's embedded directly rather than by its `id`.
	attachment: {
		type: "picture",
		picture: {
			type: "image/jpeg",
			width: 480,
			height: 360,
			url: "https://some/picture.png"
		}
	}
}
```

Attachment embedding options:

<!--
* `align` — Pass `"left"`/`"center"`/`"right"` to align a picture/video horizontally. The default is `"center"`.

```js
{
	type: "attachment",
	align: "left",
	attachment: {
		type: "picture",
		picture: ...
	}
}
```
-->

<!--
* `maxHeight` — Pass a value in pixels (example: `123`) to limit the height of a picture/video. Pass `"none"` to set no limits on the height of a picture/video. By default, a picture/video's height is limited by some default `maxHeight`.

```js
{
	type: "attachment",
	align: "center",
	maxHeight: "none",
	attachment: {
		type: "picture",
		picture: ...
	}
}
```
-->

* `expand` — Pass `true` to expand a picture/video to the page's full width.

```js
{
	type: "attachment",
	expand: true,
	attachment: {
		type: "picture",
		picture: ...
	}
}
```

* `border` — Pass `false` to opt out of showing a border around a picture.

* `link` — Can be used to wrap a picture in a hyperlink.

```js
{
	type: "attachment",
	link: "https://domain.com",
	attachment: {
		type: "picture",
		picture: ...
	}
}
```

### Read more (block)

A "Read more" button that is placed in its own paragraph.

```js
{
	type: "read-more"
}
```